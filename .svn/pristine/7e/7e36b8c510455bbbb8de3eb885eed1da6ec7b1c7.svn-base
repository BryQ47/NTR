app.controller("calcCtrl", function ($scope) {

    /******* Scope variables *******/

    $scope.btnsDisabled = false;
    $scope.showError = false;
    $scope.result = "0";
    $scope.errorMsg = "";

    /******* Scope functions *******/

    $scope.btnClicked = function (param) {
        try {
            $scope.result = performCalculation(param, $scope.result);          
        }
        catch (err) {
            DealWithError(err.message);
        }
    }
    $scope.dismissError = HideError;

    /******* Private functions *******/

    function HideError () {
        $scope.showError = false;
        $scope.errorMsg = "";
    }

    function DealWithError(msg) {
        $scope.result = "ERR";
        $scope.errorMsg = msg;
        $scope.showError = true;
        $scope.btnsDisabled = true;
    }

    // @todo: add logic here
    function performCalculation(key, val) {
        var newRes = key + 'OK';
        var oldRes = val;
        if (newRes == oldRes)
            throw { message: "Exception was thrown" };
        $scope.btnsDisabled = false;
        HideError();
        return newRes;
    }

});