app.controller("studentsCtrl", ['$scope', '$http', 'ngTableParams',
    function ($scope, $http, NgTableParams) {

        var self = this;

        $scope.studentsTable = new NgTableParams();


        /******* Scope variables *******/

        /******* Scope functions *******/

        /******* Private variables *******/

        $scope.students = [];
        $scope.errorMsg = "";

        /******* Initialization *******/

        getStudents();

   



            /******* Private functions *******/

          function loadStudents(newStudents) {
              $scope.studentsTable.settings({
                  dataset: newStudents
              });
          }

        function getStudents() {

            $http({
                method: 'GET',
                url: '/api/Students'
            }).then(function successCallback(response) {
                $scope.students = response;
                $scope.errorMsg = "";

                loadStudents(response.data.students);


            }, function errorCallback(response) {
                $scope.students = [];
                $scope.errorMsg = response;
            });


        }

        function putStudent() {

            var newStudent = { IDGroup: 1, FirstName: "Leszek", LastName: "Bogucki", IndexNo: "48903204" };

            $http({
                method: 'DELETE',
                url: '/api/Students/32',
                data: JSON.stringify({id: 31})
            }).then(function successCallback(response) {
                // this callback will be called asynchronously
                // when the response is available
                $scope.data = response;
            }, function errorCallback(response) {
                // called asynchronously if an error occurs
                // or server returns response with an error status.
                $scope.data = response;
            });

        }


}]);